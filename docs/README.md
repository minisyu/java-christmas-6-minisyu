# 🎄 크리스마스 프로모션

## 💻 프로그램 흐름

1. 방문 날짜를 입력한다
2. 주문할 메뉴와 개수를 입력한다
3. 이벤트 혜택을 적용한다
4. 이벤트 혜택이 적용된 내역을 보여준다

## ✍️ 기능 목록

1. 식당 방문 날짜 입력
    - 검증 <br>
      (에러 메시지) `"[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요."`
        - [X] 숫자만 입력하는지 확인
        - [X] 방문할 날짜가 1 이상 31 이하의 범위에 있는지 확인
          <br></br>
2. 주문할 메뉴와 개수 입력 `ex.해산물파스타-2,레드와인-1,초코케이크-1`
    - 검증          
      (에러 메시지) `"[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요."`
        - [X] 메뉴판에 없는 메뉴 입력 시 예외
        - [X] 메뉴의 개수는 1이상의 숫자만 입력되어야 한다
        - [X] 메뉴 형식이 예시와 다른 경우
        - [X] 중복 메뉴를 입력한 경우(e.g. 시저샐러드-1,시저샐러드-1)
          <br></br>
3. 이벤트 적용
    - [X] 날짜 별 할인 혜택 적용
        - 평일 할인(일요일~목요일): 평일에는 `디저트 메뉴`를 `메뉴 1개당 2,023원 할인`
        - 주말 할인(금요일, 토요일): 주말에는 `메인 메뉴`를 `메뉴 1개당 2,023원 할인`
        - 특별 할인: 달력에 `별(⭐)`이 있으면 `총 주문 금액에서 1,000원 할인`
        - 증정 이벤트: `할인 전 총 주문 금액이 12만 원 이상`일 때, 샴페인 1개 증정
    - [X] 주문한 메뉴 금액에 따라 증정 이벤트 적용
    - [X] 총 혜택 금액에 따라 배지 부여
        - 5천원 미만: 없음
        - 5천 원 이상: 별
        - 1만 원 이상: 트리
        - 2만 원 이상: 산타
          <br></br>

4. 예약 내역과 혜택 내역 출력
    - [X] 예약 날짜
    - [X] 주문 메뉴 목록
    - [X] 할인 전 주문 금액
    - [X] 증정 메뉴
    - [X] 혜택 내역 목록
    - [X] 총 혜택 내역
    - [X] 예상 결제 금액
    - [X] 배지

<br>

---

## 👍 시도해본 점

### 제네릭을 사용하여 예외처리를 개선

```
로또 미션에서 사용자가 잘못된 입력을 할 경우, 해당 부분부터 다시 입력받도록 하는 Builder Pattern을 사용했지만, 
두 입력 간의 결합도가 높아져 아쉬웠습니다.

이번 미션에서는 제네릭을 적용하여 Supplier로부터 값을 가져오는 과정에서 발생한 IllegalArgumentException을 처리하고 재시도하는 메소드를 구현했습니다.

제네릭 타입의 활용은 다양한 데이터 유형에 대한 재사용성과 범용성을 제공합니다. 
또한, 중앙에서 해당 예외를 처리하고 메시지를 출력함으로써 코드의 중복을 피하고 가독성을 향상할 수 있습니다. 
```

<br>

### Enum 적극적으로 활용

```
Menu Enum과 Category Enum을 활용하여 음식의 종류를 명시적으로 표현하고, 
할인 혜택을 적용하는 과정을 간편하게 할 수 있도록 했습니다.

DiscountPolicy Enum을 활용하여 할인 혜택을 초기에는 단순한 이름 저장 용도로 사용하다가, 
다형성을 통해 할인 혜택의 행위를 확장하고 코드를 간결하게 작성할 수 있었습니다.

테스트 코드 작성에서 Enum의 활용은 날짜 관리를 일괄적으로 처리하고 테스트의 가독성을 높일 수 있었습니다.
```

<br>

---

## 🥲 아쉬운 점

### OutputView 출력 기능

```
이벤트 혜택 내역을 ConfirmedReservation 클래스를 생성하여 View에 전달하려고 했으나, 
ConfirmedReservation 클래스의 멤버 변수가 8개나 되는 것을 알게 되었습니다. 
향후 출력할 데이터양이 더 많아지면 변환 로직이 복잡해지고 가독성이 저하될 수 있다는 생각이 들었습니다.

또한, OutputView에서 데이터를 출력하는 로직이 160줄 이상으로 길어져 유지 보수하기 어려울 뿐만 아니라 코드의 복잡성도 높다는 점을 인지했습니다. 
Text Blocks를 활용해 가독성을 일부 개선했지만, 여전히 코드를 깔끔하게 다듬지 못해 테스트 코드 작성에도 어려움을 겪었습니다. 
```

### ConfirmedReservation Dto 생성

```
이벤트 혜택 내역을 ConfirmedReservation 클래스를 생성하여 View에 전달하려고 했으나, 
ConfirmedReservation 클래스의 멤버 변수가 8개나 되는 것을 알게 되었습니다. 

향후 출력할 데이터양이 더 많아지면 변환 로직이 복잡해지고 가독성이 저하될 수 있다는 생각이 들었습니다.
```